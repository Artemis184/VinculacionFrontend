<!-- MENÃš LATERAL -->
<ion-menu
  contentId="adminContent"
  side="start"
  menuId="adminMenu"
  type="overlay"
>
  <ion-content class="menu-content">
    <div class="menu-box">
      <ion-list lines="none" class="menu-list">
        <ion-menu-toggle autoHide="true">
          <ion-item button class="menu-item" (click)="clickSolicitudes()">
            <ion-label class="menu-text">Solicitudes</ion-label>
            <ion-badge class="badge">{{ solicitudesCount }}</ion-badge>
          </ion-item>
        </ion-menu-toggle>

        <ion-menu-toggle autoHide="true">
          <ion-item button class="menu-item" (click)="clickUsuarios()">
            <ion-label class="menu-text">Lista de usuarios</ion-label>
            <span class="arrow">â€º</span>
          </ion-item>
        </ion-menu-toggle>

        <ion-menu-toggle autoHide="true">
          <ion-item button class="menu-item" (click)="clickAlarmas()">
            <ion-label class="menu-text">Lista de Alarmas</ion-label>
            <span class="arrow">â€º</span>
          </ion-item>
        </ion-menu-toggle>

        <ion-menu-toggle autoHide="true">
          <ion-item button class="menu-item" (click)="clickAuditoria()">
            <ion-label class="menu-text">Auditoria Activaciones</ion-label>
            <span class="arrow">â€º</span>
          </ion-item>
        </ion-menu-toggle>
      </ion-list>
    </div>
  </ion-content>
</ion-menu>

<!-- CONTENIDO PRINCIPAL -->
<div id="adminContent" class="page-shell">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button menu="adminMenu"></ion-menu-button>
      </ion-buttons>

      <ion-title>Alarmas asignadas</ion-title>

      <!-- âœ… Ãcono morado arriba (abre popup) -->
      <ion-buttons slot="end">
        <ion-button class="icon-btn" (click)="toggleCuenta()">
          <ion-icon name="person-circle"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content fullscreen="true" class="ion-padding">
    <!-- âœ… POPUP CUENTA / LOGOUT -->
    <div class="account-popup" *ngIf="cuentaVisible">
      <button class="account-item" (click)="verCuenta()">
        <span>Cuenta</span>
        <span class="mini-icon">ðŸ‘¤</span>
      </button>

      <button class="account-item logout" (click)="logout()">
        <span>Logout</span>
        <span class="mini-icon">â†ª</span>
      </button>
    </div>

    <!-- âœ… LISTA DE ALARMAS (hacia abajo) -->
    <ion-card class="alarma-card" *ngFor="let a of alarmasAsignadas">
      <ion-card-content>
        <div class="alarma-top">
          <div>
            <div class="alarma-nombre">{{ a.nombre }}</div>
            <div class="alarma-dir">{{ a.direccion }}</div>
          </div>

          <div class="estado-text" [class.on]="a.encendida">
            {{ a.encendida ? 'ENCENDIDO' : 'APAGADO' }}
          </div>
        </div>

        <!-- âœ… SWITCH -->
        <div class="switch" [class.on]="a.encendida" (click)="toggleAlarma(a)">
          <div class="knob"></div>
        </div>
      </ion-card-content>
    </ion-card>

    <div style="height: 40px"></div>
  </ion-content>
</div>
